<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
    <h1>Finance Tracker</h1>

    <table>
        <thead>
            <tr>
                <th>Expense</th>
                <th>Value</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for row in data %}
            <tr>
                <td>{{ row[1] }}</td>
                <td>{{ row[2] }}</td>
                <td class="actions">
                    <!-- Update Form -->
                    <form action="/update" method="post">
                        <input type="hidden" name="expense_id" value="{{ row[0] }}">
                        <input type="text" name="expense" value="{{ row[1] }}">
                        <input type="number" name="value" value="{{ row[2] }}">
                        <input type="submit" class="button update-button" value="Update">
                    </form>

                    <!-- Delete Form -->
                    <form action="/delete/{{ row[0] }}" method="post">
                        <input type="hidden" name="id" value="{{ row[0] }}">
                        <input type="submit" class="button delete-button" value="Delete">
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>Create a new expense</h2>
		<form action="/create" method="post">
			<label for="expense">Expense:</label>
			<input type="text" id="expense" name="expense" placeholder="Expense" required>
			<label for="value">Value:</label>
			<input type="number" id="value" name="value" placeholder="Value" required>
			<input type="submit" class="button create-button" value="Create">
		</form>
	</body>
</html>


<!--JS to use for AJAX later:-->

<!--<script>-->
<!--    function deleteExpense(event) {-->
<!--        event.preventDefault();  // Prevent the default form submission-->

<!--        // Get the form element-->
<!--        var form = document.getElementById('deleteForm');-->

<!--        // Get the action (URL) of the form-->
<!--        var action = form.getAttribute('action');-->

<!--        // Confirm deletion (optional)-->
<!--        if (!confirm('Are you sure you want to delete this expense?')) {-->
<!--            return;  // Cancel deletion if user cancels-->
<!--        }-->

<!--        // Create an XMLHttpRequest object-->
<!--        var xhr = new XMLHttpRequest();-->

<!--        // Open a DELETE request to the server-->
<!--        xhr.open('DELETE', action);-->

<!--        // Set Content-Type header if needed-->
<!--        // xhr.setRequestHeader('Content-Type', 'application/json');-->

<!--        // Set up callback function when request is complete-->
<!--        xhr.onload = function() {-->
<!--            if (xhr.status === 200) {-->
<!--                // Optionally handle success response-->
<!--                window.location.reload();  // Refresh page or update UI as needed-->
<!--            } else {-->
<!--                // Handle error response (optional)-->
<!--                alert('Failed to delete expense. Please try again.');-->
<!--            }-->
<!--        };-->

<!--        // Send the DELETE request-->
<!--        xhr.send();-->
<!--    }-->
<!--</script>-->


<!--<script>-->
<!--    function updateExpense(event) {-->
<!--        event.preventDefault();  // Prevent the default form submission-->

<!--        // Get the form element-->
<!--        var form = document.getElementById('updateForm');-->

<!--        // Get the action (URL) of the form-->
<!--        var action = form.getAttribute('action');-->

<!--        // Get the method of the form-->
<!--        var method = form.getAttribute('method');-->

<!--        // Get the data from the form-->
<!--        var formData = new FormData(form);-->

<!--        // Create an XMLHttpRequest object-->
<!--        var xhr = new XMLHttpRequest();-->

<!--        // Open a POST request to the server-->
<!--        xhr.open(method, action);-->

<!--        // Set up callback function when request is complete-->
<!--        xhr.onload = function() {-->
<!--            if (xhr.status === 200) {-->
<!--                // Optionally handle success response-->
<!--                alert('Expense updated successfully');-->
<!--                window.location.reload();  // Refresh page or update UI as needed-->
<!--            } else {-->
<!--                // Handle error response (optional)-->
<!--                alert('Failed to update expense. Please try again.');-->
<!--            }-->
<!--        };-->

<!--        // Send the POST request with form data-->
<!--        xhr.send(formData);-->
<!--    }-->
<!--</script>-->




